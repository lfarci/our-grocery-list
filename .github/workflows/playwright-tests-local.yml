name: Playwright Tests (Local Services)

on:
  workflow_call:
    inputs:
      branch_name:
        description: 'Branch name to checkout and test'
        required: false
        type: string
        default: ''
      test_files:
        description: 'Space-separated list of Playwright spec files to run; runs all when empty'
        required: false
        type: string
        default: ''
      cosmos_connection_string:
        description: 'Cosmos DB connection string for the emulator'
        required: false
        type: string
        default: ''
  workflow_dispatch:
    inputs:
      branch_name:
        description: 'Branch name to checkout and test'
        required: false
        type: string
        default: ''
      test_files:
        description: 'Space-separated list of Playwright spec files to run; runs all when empty'
        required: false
        type: string
        default: ''
      cosmos_connection_string:
        description: 'Cosmos DB connection string for the emulator'
        required: false
        type: string
        default: ''

permissions:
  contents: read

jobs:
  test:
    name: Run Playwright Tests (Local)
    uses: ./.github/workflows/playwright-tests.yml
    with:
      deployment_url: local
      branch_name: ${{ inputs.branch_name }}
      test_files: ${{ inputs.test_files }}
      cosmos_connection_string: ${{ inputs.cosmos_connection_string }}
